(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[593],{5215:function(e,t,n){Promise.resolve().then(n.bind(n,314))},314:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var l=n(7437),a=n(2265),r=n(1169),d=function(e){let{params:t}=e,[n,d]=(0,a.useState)(),o=(0,r.useSearchParams)().get("schedule");return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:3000/api/inventory/".concat(t.id,"?schedule=").concat(o));e.ok||console.error(e.statusText);let n=await e.json();0===n.maintenance_record.length&&n.maintenance_record.push({schedule:o,status:"Normal",note:"",ref:""}),d(n)}catch(e){console.error(e)}})()},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"py-10 lg:py-14 px-5",children:(0,l.jsx)("div",{className:"grid min-h-dvh gap-2",children:function(e,t){var n,r,d;let[o,s]=(0,a.useState)(),[i,c]=(0,a.useState)(),[u,m]=(0,a.useState)(!1),[h,v]=(0,a.useState)(),f=e=>{var t,n,l,a;(null==e?void 0:null===(t=e.maintenance_record[0])||void 0===t?void 0:t.id)!==void 0?(m(!0),v(null==e?void 0:null===(a=e.maintenance_record[0])||void 0===a?void 0:a.status)):m(!1),(null==e?void 0:null===(n=e.maintenance_record[0])||void 0===n?void 0:n.status)==="Normal"?s("Normal"):(null==e?void 0:null===(l=e.maintenance_record[0])||void 0===l?void 0:l.status)==="Out of order"?s("Out of order"):s("Other")};(0,a.useEffect)(()=>{var t;(null==e?void 0:null===(t=e.maintenance_record[0])||void 0===t?void 0:t.status)&&s(e.maintenance_record[0].status),c(e),f(e),v(u&&(null==e?void 0:e.maintenance_record[0].status))},[e,u]);let x=async t=>{let n;t.preventDefault();let l=Object.fromEntries(new FormData(t.currentTarget));n=u?{id:null==e?void 0:e.maintenance_record[0].id,schedule:l.schedule,inventory_id:null==e?void 0:e.id,status:l.status,note:l.note,ref:l.ref}:{schedule:l.schedule,inventory_id:null==e?void 0:e.id,status:l.status,note:l.note,ref:l.ref};let a=u?"PUT":"POST";(await fetch("http://localhost:3000/api/maintenance",{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(alert("Success"),window.location.href="/maintenance"):alert("Error")},p=async e=>{var t;e.preventDefault();let n={id:null==i?void 0:null===(t=i.maintenance_record[0])||void 0===t?void 0:t.id};(await fetch("http://localhost:3000/api/maintenance",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok?(alert("Success"),window.location.href="/maintenance"):alert("Error")};return(0,l.jsxs)("form",{className:"flex flex-col gap-4 p-4",onSubmit:x,onReset:p,children:[(0,l.jsxs)("h1",{className:"text-2xl font-semibold",children:["Maintenance Item ",null==i?void 0:i.inventory_id]}),(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block",htmlFor:"id",children:"ID"}),(0,l.jsx)("input",{className:"w-full text-gray-700 border rounded-md bg-gray-50",type:"text",name:"id",id:"id",value:(null==i?void 0:i.TIJ_ID)||"",readOnly:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block",htmlFor:"item",children:"Item"}),(0,l.jsx)("input",{className:"w-full text-gray-700 border rounded-md bg-gray-50",type:"text",name:"item",id:"item",value:(null==i?void 0:i.name)||"",readOnly:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block",htmlFor:"schedule",children:"Schedule"}),(0,l.jsx)("input",{className:"w-full text-gray-700 border rounded-md bg-gray-50",type:"text",name:"schedule",id:"schedule",defaultValue:(null==i?void 0:null===(n=i.maintenance_record[0])||void 0===n?void 0:n.schedule)||"",readOnly:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block",htmlFor:"status",children:["Status (Current: ",h||"Not Created record",")"]}),(0,l.jsxs)("select",{className:"w-full",name:"status",id:"status",defaultValue:o||"",onChange:e=>s(e.target.value),children:[(0,l.jsx)("option",{value:"Normal",children:"Normal"}),(0,l.jsx)("option",{value:"Out of order",children:"Out of order"}),(0,l.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block",htmlFor:"note",children:"Note"}),(0,l.jsx)("input",{className:"w-full border rounded-md",type:"text",name:"note",id:"note",defaultValue:(null==i?void 0:null===(r=i.maintenance_record[0])||void 0===r?void 0:r.note)||""})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block",htmlFor:"ref",children:"Ref"}),(0,l.jsx)("input",{className:"w-full border rounded-md",type:"text",name:"ref",id:"ref",defaultValue:(null==i?void 0:null===(d=i.maintenance_record[0])||void 0===d?void 0:d.ref)||""})]}),(0,l.jsx)("button",{className:"bg-blue-500 text-white rounded-md py-2",type:"submit",children:"Submit"}),u?(0,l.jsx)("button",{className:"bg-red-500 text-white rounded-md py-2",type:"reset",children:"Delete"}):null]})]})}(n,0)})})})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5215)}),_N_E=e.O()}]);